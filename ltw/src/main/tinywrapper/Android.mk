LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := glsl_optimizer
LOCAL_SRC_FILES := glsl_optimizer/src/code/ir_print_glsl_visitor.cpp \
   glsl_optimizer/src/code/optimizer.cpp \
   glsl_optimizer/src/code/c_wrapper.cpp \
   glsl_optimizer/src/code/GlslConvert.cpp \
   glsl_optimizer/src/code/ir_print_ir_visitor.cpp \
   glsl_optimizer/src/util/compat_layer.cpp \
   glsl_optimizer/src/util/u_qsort.cpp \
   glsl_optimizer/src/util/u_debug_stack_android.cpp \
   glsl_optimizer/src/compiler/nir_types.cpp \
   glsl_optimizer/src/compiler/glsl/ir_validate.cpp \
   glsl_optimizer/src/compiler/glsl/hir_field_selection.cpp \
   glsl_optimizer/src/compiler/glsl/builtin_variables.cpp \
   glsl_optimizer/src/compiler/glsl/glsl_parser.cpp \
   glsl_optimizer/src/compiler/glsl/generate_ir.cpp \
   glsl_optimizer/src/compiler/glsl/glsl_to_nir.cpp \
   glsl_optimizer/src/compiler/glsl/ir_array_refcount.cpp \
   glsl_optimizer/src/compiler/glsl/lower_instructions.cpp \
   glsl_optimizer/src/compiler/glsl/lower_discard_flow.cpp \
   glsl_optimizer/src/compiler/glsl/opt_dead_builtin_variables.cpp \
   glsl_optimizer/src/compiler/glsl/link_varyings.cpp \
   glsl_optimizer/src/compiler/glsl/glsl_parser_extras.cpp \
   glsl_optimizer/src/compiler/glsl/builtin_types.cpp \
   glsl_optimizer/src/compiler/glsl/opt_algebraic.cpp \
   glsl_optimizer/src/compiler/glsl/lower_named_interface_blocks.cpp \
   glsl_optimizer/src/compiler/glsl/link_uniforms.cpp \
   glsl_optimizer/src/compiler/glsl/ir.cpp \
   glsl_optimizer/src/compiler/glsl/opt_tree_grafting.cpp \
   glsl_optimizer/src/compiler/glsl/ir_constant_expression.cpp \
   glsl_optimizer/src/compiler/glsl/ast_type.cpp \
   glsl_optimizer/src/compiler/glsl/lower_jumps.cpp \
   glsl_optimizer/src/compiler/glsl/opt_if_simplification.cpp \
   glsl_optimizer/src/compiler/glsl/ir_hierarchical_visitor.cpp \
   glsl_optimizer/src/compiler/glsl/ir_builder.cpp \
   glsl_optimizer/src/compiler/glsl/ast_array_index.cpp \
   glsl_optimizer/src/compiler/glsl/propagate_invariance.cpp \
   glsl_optimizer/src/compiler/glsl/ir_hv_accept.cpp \
   glsl_optimizer/src/compiler/glsl/lower_builtins.cpp \
   glsl_optimizer/src/compiler/glsl/link_interface_blocks.cpp \
   glsl_optimizer/src/compiler/glsl/ast_to_hir.cpp \
   glsl_optimizer/src/compiler/glsl/ir_function_detect_recursion.cpp \
   glsl_optimizer/src/compiler/glsl/lower_packing_builtins.cpp \
   glsl_optimizer/src/compiler/glsl/loop_analysis.cpp \
   glsl_optimizer/src/compiler/glsl/ir_rvalue_visitor.cpp \
   glsl_optimizer/src/compiler/glsl/ir_clone.cpp \
   glsl_optimizer/src/compiler/glsl/opt_flip_matrices.cpp \
   glsl_optimizer/src/compiler/glsl/opt_dead_code.cpp \
   glsl_optimizer/src/compiler/glsl/link_uniform_block_active_visitor.cpp \
   glsl_optimizer/src/compiler/glsl/s_expression.cpp \
   glsl_optimizer/src/compiler/glsl/ir_reader.cpp \
   glsl_optimizer/src/compiler/glsl/ir_equals.cpp \
   glsl_optimizer/src/compiler/glsl/ir_function_can_inline.cpp \
   glsl_optimizer/src/compiler/glsl/lower_vec_index_to_cond_assign.cpp \
   glsl_optimizer/src/compiler/glsl/standalone_scaffolding.cpp \
   glsl_optimizer/src/compiler/glsl/link_uniform_blocks.cpp \
   glsl_optimizer/src/compiler/glsl/opt_function_inlining.cpp \
   glsl_optimizer/src/compiler/glsl/lower_mat_op_to_vec.cpp \
   glsl_optimizer/src/compiler/glsl/lower_blend_equation_advanced.cpp \
   glsl_optimizer/src/compiler/glsl/ir_expression_flattening.cpp \
   glsl_optimizer/src/compiler/glsl/opt_dead_code_local.cpp \
   glsl_optimizer/src/compiler/glsl/opt_flatten_nested_if_blocks.cpp \
   glsl_optimizer/src/compiler/glsl/ir_function.cpp \
   glsl_optimizer/src/compiler/glsl/lower_precision.cpp \
   glsl_optimizer/src/compiler/glsl/ir_variable_refcount.cpp \
   glsl_optimizer/src/compiler/glsl/lower_vector_derefs.cpp \
   glsl_optimizer/src/compiler/glsl/builtin_functions.cpp \
   glsl_optimizer/src/compiler/glsl/linker_util.cpp \
   glsl_optimizer/src/compiler/glsl/lower_distance.cpp \
   glsl_optimizer/src/compiler/glsl/opt_rebalance_tree.cpp \
   glsl_optimizer/src/compiler/glsl/linker.cpp \
   glsl_optimizer/src/compiler/glsl/opt_dead_functions.cpp \
   glsl_optimizer/src/compiler/glsl/glsl_symbol_table.cpp \
   glsl_optimizer/src/compiler/glsl/lower_subroutine.cpp \
   glsl_optimizer/src/compiler/glsl/glsl_lexer.cpp \
   glsl_optimizer/src/compiler/glsl/link_functions.cpp \
   glsl_optimizer/src/compiler/glsl/lower_int64.cpp \
   glsl_optimizer/src/compiler/glsl/lower_discard.cpp \
   glsl_optimizer/src/compiler/glsl/string_to_uint_map.cpp \
   glsl_optimizer/src/compiler/glsl/ast_function.cpp \
   glsl_optimizer/src/compiler/glsl/ast_expr.cpp \
   glsl_optimizer/src/compiler/glsl/ir_print_visitor.cpp \
   glsl_optimizer/src/compiler/glsl/opt_minmax.cpp \
   glsl_optimizer/src/compiler/glsl/ir_basic_block.cpp \
   glsl_optimizer/src/compiler/glsl/ir_builder_print_visitor.cpp \
   glsl_optimizer/src/compiler/glsl_types.cpp \
   glsl_optimizer/src/util/sha1/sha1.c \
   glsl_optimizer/src/util/u_debug_stack.c \
   glsl_optimizer/src/util/u_vector.c \
   glsl_optimizer/src/util/u_debug.c \
   glsl_optimizer/src/util/bitscan.c \
   glsl_optimizer/src/util/vma.c \
   glsl_optimizer/src/util/half_float.c \
   glsl_optimizer/src/util/u_idalloc.c \
   glsl_optimizer/src/util/u_process.c \
   glsl_optimizer/src/util/rgtc.c \
   glsl_optimizer/src/util/u_worklist.c \
   glsl_optimizer/src/util/sparse_array.c \
   glsl_optimizer/src/util/u_dl.c \
   glsl_optimizer/src/util/os_file.c \
   glsl_optimizer/src/util/fossilize_db.c \
   glsl_optimizer/src/util/u_thread.c \
   glsl_optimizer/src/util/build_id.c \
   glsl_optimizer/src/util/u_printf.c \
   glsl_optimizer/src/util/rb_tree.c \
   glsl_optimizer/src/util/register_allocate.c \
   glsl_optimizer/src/util/fast_idiv_by_const.c \
   glsl_optimizer/src/util/disk_cache_os.c \
   glsl_optimizer/src/util/blob.c \
   glsl_optimizer/src/util/strtod.c \
   glsl_optimizer/src/util/os_misc.c \
   glsl_optimizer/src/util/hash_table.c \
   glsl_optimizer/src/util/u_atomic.c \
   glsl_optimizer/src/util/softfloat.c \
   glsl_optimizer/src/util/crc32.c \
   glsl_optimizer/src/util/rand_xor.c \
   glsl_optimizer/src/util/os_memory_fd.c \
   glsl_optimizer/src/util/u_hash_table.c \
   glsl_optimizer/src/util/double.c \
   glsl_optimizer/src/util/slab.c \
   glsl_optimizer/src/util/futex.c \
   glsl_optimizer/src/util/u_queue.c \
   glsl_optimizer/src/util/u_call_once.c \
   glsl_optimizer/src/util/disk_cache.c \
   glsl_optimizer/src/util/set.c \
   glsl_optimizer/src/util/u_debug_memory.c \
   glsl_optimizer/src/util/u_math.c \
   glsl_optimizer/src/util/mesa_cache_db.c \
   glsl_optimizer/src/util/simple_mtx.c \
   glsl_optimizer/src/util/mesa-sha1.c \
   glsl_optimizer/src/util/log.c \
   glsl_optimizer/src/util/compress.c \
   glsl_optimizer/src/util/format/u_format_rgtc.c \
   glsl_optimizer/src/util/format/u_format_etc.c \
   glsl_optimizer/src/util/format/u_format_unpack_neon.c \
   glsl_optimizer/src/util/format/u_format_zs.c \
   glsl_optimizer/src/util/format/u_format_latc.c \
   glsl_optimizer/src/util/format/u_format_table.c \
   glsl_optimizer/src/util/format/u_format.c \
   glsl_optimizer/src/util/format/u_format_other.c \
   glsl_optimizer/src/util/format/u_format_fxt1.c \
   glsl_optimizer/src/util/format/u_format_bptc.c \
   glsl_optimizer/src/util/format/u_format_s3tc.c \
   glsl_optimizer/src/util/format/u_format_yuv.c \
   glsl_optimizer/src/util/string_buffer.c \
   glsl_optimizer/src/util/os_socket.c \
   glsl_optimizer/src/util/mesa_cache_db_multipart.c \
   glsl_optimizer/src/util/u_cpu_detect.c \
   glsl_optimizer/src/util/u_mm.c \
   glsl_optimizer/src/util/u_debug_describe.c \
   glsl_optimizer/src/util/anon_file.c \
   glsl_optimizer/src/util/dag.c \
   glsl_optimizer/src/util/format_srgb.c \
   glsl_optimizer/src/util/ralloc.c \
   glsl_optimizer/src/util/os_time.c \
   glsl_optimizer/src/util/u_debug_refcnt.c \
   glsl_optimizer/src/util/u_debug_symbol.c \
   glsl_optimizer/src/util/streaming-load-memcpy.c \
   glsl_optimizer/src/mesa/main/debug_output.c \
   glsl_optimizer/src/mesa/main/errors.c \
   glsl_optimizer/src/mesa/main/extensions_table.c \
   glsl_optimizer/src/mesa/main/imports.c \
   glsl_optimizer/src/mesa/program/symbol_table.c \
   glsl_optimizer/src/mesa/program/prog_parameter.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_uniform_initializers.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_packed_varyings.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_opt_dead_builtin_varyings.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_xfb_varying.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_atomics.c \
   glsl_optimizer/src/compiler/glsl/glcpp/glcpp.c \
   glsl_optimizer/src/compiler/glsl/glcpp/glcpp-parse.c \
   glsl_optimizer/src/compiler/glsl/glcpp/pp.c \
   glsl_optimizer/src/compiler/glsl/glcpp/pp_standalone_scaffolding.c \
   glsl_optimizer/src/compiler/glsl/glcpp/glcpp-lex.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_samplers_as_deref.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_buffers.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_uniforms.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_varyings.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_linker.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_xfb.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_atomics.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_link_uniform_blocks.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_samplers.c \
   glsl_optimizer/src/compiler/glsl/gl_nir_lower_images.c \
   glsl_optimizer/src/compiler/shader_enums.c \
   glsl_optimizer/src/compiler/nir/nir_opcodes.c \
   glsl_optimizer/src/compiler/nir/nir_from_ssa.c \
   glsl_optimizer/src/compiler/nir/nir_lower_point_smooth.c \
   glsl_optimizer/src/compiler/nir/nir_opt_shrink_vectors.c \
   glsl_optimizer/src/compiler/nir/nir_lower_wpos_ytransform.c \
   glsl_optimizer/src/compiler/nir/nir_metadata.c \
   glsl_optimizer/src/compiler/nir/nir_lower_bit_size.c \
   glsl_optimizer/src/compiler/nir/nir_lower_shader_calls.c \
   glsl_optimizer/src/compiler/nir/nir_lower_printf.c \
   glsl_optimizer/src/compiler/nir/nir_lower_clip.c \
   glsl_optimizer/src/compiler/nir/nir_scale_fdiv.c \
   glsl_optimizer/src/compiler/nir/nir_opt_preamble.c \
   glsl_optimizer/src/compiler/nir/nir_opt_dead_write_vars.c \
   glsl_optimizer/src/compiler/nir/nir_inline_functions.c \
   glsl_optimizer/src/compiler/nir/nir_lower_sysvals_to_varyings.c \
   glsl_optimizer/src/compiler/nir/nir_lower_two_sided_color.c \
   glsl_optimizer/src/compiler/nir/nir_opt_remove_phis.c \
   glsl_optimizer/src/compiler/nir/nir_lower_phis_to_scalar.c \
   glsl_optimizer/src/compiler/nir/nir_opt_copy_propagate.c \
   glsl_optimizer/src/compiler/nir/nir_lower_vec_to_movs.c \
   glsl_optimizer/src/compiler/nir/nir_phi_builder.c \
   glsl_optimizer/src/compiler/nir/nir_lower_single_sampled.c \
   glsl_optimizer/src/compiler/nir/nir_opt_peephole_select.c \
   glsl_optimizer/src/compiler/nir/nir_opt_cse.c \
   glsl_optimizer/src/compiler/nir/nir_opt_dead_cf.c \
   glsl_optimizer/src/compiler/nir/nir_lower_returns.c \
   glsl_optimizer/src/compiler/nir/nir_lower_discard_or_demote.c \
   glsl_optimizer/src/compiler/nir/nir_normalize_cubemap_coords.c \
   glsl_optimizer/src/compiler/nir/nir_search.c \
   glsl_optimizer/src/compiler/nir/nir_lower_bool_to_bitsize.c \
   glsl_optimizer/src/compiler/nir/nir_worklist.c \
   glsl_optimizer/src/compiler/nir/nir_passthrough_gs.c \
   glsl_optimizer/src/compiler/nir/nir_move_vec_src_uses_to_dest.c \
   glsl_optimizer/src/compiler/nir/nir_lower_packing.c \
   glsl_optimizer/src/compiler/nir/nir_group_loads.c \
   glsl_optimizer/src/compiler/nir/nir_opt_gcm.c \
   glsl_optimizer/src/compiler/nir/nir_lower_viewport_transform.c \
   glsl_optimizer/src/compiler/nir/nir_gather_xfb_info.c \
   glsl_optimizer/src/compiler/nir/nir_lower_subgroups.c \
   glsl_optimizer/src/compiler/nir/nir_gather_ssa_types.c \
   glsl_optimizer/src/compiler/nir/nir_lower_clip_halfz.c \
   glsl_optimizer/src/compiler/nir/nir_builder.c \
   glsl_optimizer/src/compiler/nir/nir_deref.c \
   glsl_optimizer/src/compiler/nir/nir_opt_shrink_stores.c \
   glsl_optimizer/src/compiler/nir/nir_lower_int64.c \
   glsl_optimizer/src/compiler/nir/nir_opt_load_store_vectorize.c \
   glsl_optimizer/src/compiler/nir/nir_opt_algebraic.c \
   glsl_optimizer/src/compiler/nir/nir_lower_mem_access_bit_sizes.c \
   glsl_optimizer/src/compiler/nir/nir_opt_find_array_copies.c \
   glsl_optimizer/src/compiler/nir/nir_lower_bool_to_int32.c \
   glsl_optimizer/src/compiler/nir/nir_opt_barriers.c \
   glsl_optimizer/src/compiler/nir/nir_lower_passthrough_edgeflags.c \
   glsl_optimizer/src/compiler/nir/nir_opt_constant_folding.c \
   glsl_optimizer/src/compiler/nir/nir_opt_move_discards_to_top.c \
   glsl_optimizer/src/compiler/nir/nir_lower_goto_ifs.c \
   glsl_optimizer/src/compiler/nir/nir_lower_image.c \
   glsl_optimizer/src/compiler/nir/nir_repair_ssa.c \
   glsl_optimizer/src/compiler/nir/nir_lower_memory_model.c \
   glsl_optimizer/src/compiler/nir/nir_lower_cl_images.c \
   glsl_optimizer/src/compiler/nir/nir_opt_ray_queries.c \
   glsl_optimizer/src/compiler/nir/nir_lower_poly_line_smooth.c \
   glsl_optimizer/src/compiler/nir/nir_opt_vectorize.c \
   glsl_optimizer/src/compiler/nir/nir_lower_pntc_ytransform.c \
   glsl_optimizer/src/compiler/nir/nir_lower_variable_initializers.c \
   glsl_optimizer/src/compiler/nir/nir_lower_interpolation.c \
   glsl_optimizer/src/compiler/nir/nir_opt_comparison_pre.c \
   glsl_optimizer/src/compiler/nir/nir_opt_if.c \
   glsl_optimizer/src/compiler/nir/nir_lower_io_to_scalar.c \
   glsl_optimizer/src/compiler/nir/nir.c \
   glsl_optimizer/src/compiler/nir/nir_opt_sink.c \
   glsl_optimizer/src/compiler/nir/nir_builtin_builder.c \
   glsl_optimizer/src/compiler/nir/nir_split_64bit_vec3_and_vec4.c \
   glsl_optimizer/src/compiler/nir/nir_lower_alpha_test.c \
   glsl_optimizer/src/compiler/nir/nir_lower_readonly_images_to_tex.c \
   glsl_optimizer/src/compiler/nir/nir_opt_offsets.c \
   glsl_optimizer/src/compiler/nir/nir_liveness.c \
   glsl_optimizer/src/compiler/nir/nir_lower_io_to_temporaries.c \
   glsl_optimizer/src/compiler/nir/nir_lower_task_shader.c \
   glsl_optimizer/src/compiler/nir/nir_opt_intrinsics.c \
   glsl_optimizer/src/compiler/nir/nir_lower_frexp.c \
   glsl_optimizer/src/compiler/nir/nir_validate.c \
   glsl_optimizer/src/compiler/nir/nir_lower_ubo_vec4.c \
   glsl_optimizer/src/compiler/nir/nir_lower_continue_constructs.c \
   glsl_optimizer/src/compiler/nir/nir_lower_vars_to_ssa.c \
   glsl_optimizer/src/compiler/nir/nir_mod_analysis.c \
   glsl_optimizer/src/compiler/nir/nir_opt_access.c \
   glsl_optimizer/src/compiler/nir/nir_lower_alu_width.c \
   glsl_optimizer/src/compiler/nir/nir_lower_bool_to_float.c \
   glsl_optimizer/src/compiler/nir/nir_lower_global_vars_to_local.c \
   glsl_optimizer/src/compiler/nir/nir_lower_tex_shadow.c \
   glsl_optimizer/src/compiler/nir/nir_split_var_copies.c \
   glsl_optimizer/src/compiler/nir/nir_opt_rematerialize_compares.c \
   glsl_optimizer/src/compiler/nir/nir_lower_system_values.c \
   glsl_optimizer/src/compiler/nir/nir_inline_uniforms.c \
   glsl_optimizer/src/compiler/nir/nir_dominance.c \
   glsl_optimizer/src/compiler/nir/nir_lower_texcoord_replace_late.c \
   glsl_optimizer/src/compiler/nir/nir_gs_count_vertices.c \
   glsl_optimizer/src/compiler/nir/nir_print.c \
   glsl_optimizer/src/compiler/nir/nir_opt_copy_prop_vars.c \
   glsl_optimizer/src/compiler/nir/nir_lower_indirect_derefs.c \
   glsl_optimizer/src/compiler/nir/nir_opt_phi_precision.c \
   glsl_optimizer/src/compiler/nir/nir_opt_fragdepth.c \
   glsl_optimizer/src/compiler/nir/nir_lower_is_helper_invocation.c \
   glsl_optimizer/src/compiler/nir/nir_lower_point_size.c \
   glsl_optimizer/src/compiler/nir/nir_opt_uniform_atomics.c \
   glsl_optimizer/src/compiler/nir/nir_lower_flrp.c \
   glsl_optimizer/src/compiler/nir/nir_opt_loop_unroll.c \
   glsl_optimizer/src/compiler/nir/nir_clone.c \
   glsl_optimizer/src/compiler/nir/nir_lower_texcoord_replace.c \
   glsl_optimizer/src/compiler/nir/nir_lower_samplers.c \
   glsl_optimizer/src/compiler/nir/nir_lower_clip_disable.c \
   glsl_optimizer/src/compiler/nir/nir_lower_io_to_vector.c \
   glsl_optimizer/src/compiler/nir/nir_split_vars.c \
   glsl_optimizer/src/compiler/nir/nir_lower_input_attachments.c \
   glsl_optimizer/src/compiler/nir/nir_schedule.c \
   glsl_optimizer/src/compiler/nir/nir_lower_fragcolor.c \
   glsl_optimizer/src/compiler/nir/nir_lower_tex.c \
   glsl_optimizer/src/compiler/nir/nir_range_analysis.c \
   glsl_optimizer/src/compiler/nir/nir_lower_regs_to_ssa.c \
   glsl_optimizer/src/compiler/nir/nir_lower_blend.c \
   glsl_optimizer/src/compiler/nir/nir_divergence_analysis.c \
   glsl_optimizer/src/compiler/nir/nir_lower_drawpixels.c \
   glsl_optimizer/src/compiler/nir/nir_opt_trivial_continues.c \
   glsl_optimizer/src/compiler/nir/nir_opt_idiv_const.c \
   glsl_optimizer/src/compiler/nir/nir_lower_fragcoord_wtrans.c \
   glsl_optimizer/src/compiler/nir/nir_lower_bitmap.c \
   glsl_optimizer/src/compiler/nir/nir_passthrough_tcs.c \
   glsl_optimizer/src/compiler/nir/nir_opt_undef.c \
   glsl_optimizer/src/compiler/nir/nir_gather_info.c \
   glsl_optimizer/src/compiler/nir/nir_lower_wrmasks.c \
   glsl_optimizer/src/compiler/nir/nir_lower_vec3_to_vec4.c \
   glsl_optimizer/src/compiler/nir/nir_serialize.c \
   glsl_optimizer/src/compiler/nir/nir_lower_idiv.c \
   glsl_optimizer/src/compiler/nir/nir_opt_non_uniform_access.c \
   glsl_optimizer/src/compiler/nir/nir_lower_array_deref_of_vec.c \
   glsl_optimizer/src/compiler/nir/nir_control_flow.c \
   glsl_optimizer/src/compiler/nir/nir_opt_large_constants.c \
   glsl_optimizer/src/compiler/nir/nir_lower_wpos_center.c \
   glsl_optimizer/src/compiler/nir/nir_constant_expressions.c \
   glsl_optimizer/src/compiler/nir/nir_linking_helpers.c \
   glsl_optimizer/src/compiler/nir/nir_instr_set.c \
   glsl_optimizer/src/compiler/nir/nir_lower_mediump.c \
   glsl_optimizer/src/compiler/nir/nir_split_per_member_structs.c \
   glsl_optimizer/src/compiler/nir/nir_lower_convert_alu_types.c \
   glsl_optimizer/src/compiler/nir/nir_lower_gs_intrinsics.c \
   glsl_optimizer/src/compiler/nir/nir_lower_int_to_float.c \
   glsl_optimizer/src/compiler/nir/nir_lower_to_source_mods.c \
   glsl_optimizer/src/compiler/nir/nir_remove_dead_variables.c \
   glsl_optimizer/src/compiler/nir/nir_lower_alu.c \
   glsl_optimizer/src/compiler/nir/nir_lower_var_copies.c \
   glsl_optimizer/src/compiler/nir/nir_lower_discard_if.c \
   glsl_optimizer/src/compiler/nir/nir_lower_atomics_to_ssbo.c \
   glsl_optimizer/src/compiler/nir/nir_lower_fb_read.c \
   glsl_optimizer/src/compiler/nir/nir_lower_flatshade.c \
   glsl_optimizer/src/compiler/nir/nir_lower_clip_cull_distance_arrays.c \
   glsl_optimizer/src/compiler/nir/nir_propagate_invariant.c \
   glsl_optimizer/src/compiler/nir/nir_lower_helper_writes.c \
   glsl_optimizer/src/compiler/nir/nir_lower_const_arrays_to_uniforms.c \
   glsl_optimizer/src/compiler/nir/nir_opt_memcpy.c \
   glsl_optimizer/src/compiler/nir/nir_opt_conditional_discard.c \
   glsl_optimizer/src/compiler/nir/nir_to_lcssa.c \
   glsl_optimizer/src/compiler/nir/nir_sweep.c \
   glsl_optimizer/src/compiler/nir/nir_lower_uniforms_to_ubo.c \
   glsl_optimizer/src/compiler/nir/nir_opt_combine_stores.c \
   glsl_optimizer/src/compiler/nir/nir_lower_fp16_conv.c \
   glsl_optimizer/src/compiler/nir/nir_lower_clamp_color_outputs.c \
   glsl_optimizer/src/compiler/nir/nir_lower_point_size_mov.c \
   glsl_optimizer/src/compiler/nir/nir_opt_dce.c \
   glsl_optimizer/src/compiler/nir/nir_lower_double_ops.c \
   glsl_optimizer/src/compiler/nir/nir_lower_non_uniform_access.c \
   glsl_optimizer/src/compiler/nir/nir_lower_ssbo.c \
   glsl_optimizer/src/compiler/nir/nir_lower_load_const_to_scalar.c \
   glsl_optimizer/src/compiler/nir/nir_lower_io.c \
   glsl_optimizer/src/compiler/nir/nir_lower_scratch.c \
   glsl_optimizer/src/compiler/nir/nir_opt_move.c \
   glsl_optimizer/src/compiler/nir/nir_lower_amul.c \
   glsl_optimizer/src/compiler/nir/nir_lower_multiview.c \
   glsl_optimizer/src/compiler/nir/nir_lower_patch_vertices.c \
   glsl_optimizer/src/compiler/nir/nir_lower_undef_to_zero.c \
   glsl_optimizer/src/compiler/nir/nir_lower_io_arrays_to_elements.c \
   glsl_optimizer/src/compiler/nir/nir_loop_analyze.c \
   glsl_optimizer/src/compiler/nir/nir_lower_memcpy.c \
   glsl_optimizer/src/compiler/nir/nir_intrinsics.c \
   glsl_optimizer/src/compiler/nir/nir_lower_locals_to_regs.c
LOCAL_CFLAGS += -D_LIB
LOCAL_CFLAGS += -DNOMINMAX
LOCAL_CFLAGS += -D_USE_MATH_DEFINES
LOCAL_CFLAGS += -D__STDC_NO_THREADS__
LOCAL_CFLAGS += -D__STDC_LIMIT_MACROS
LOCAL_CFLAGS += -D__STDC_FORMAT_MACROS
LOCAL_CFLAGS += -D__STDC_CONSTANT_MACROS
LOCAL_CFLAGS += -DUTIL_ARCH_LITTLE_ENDIAN
LOCAL_CFLAGS += -DUNIX
LOCAL_CFLAGS += -DANDROID -DHAVE_STRUCT_TIMESPEC -DDETECT_OS_ANDROID
LOCAL_CFLAGS += -DHAVE_OPENGL
LOCAL_CFLAGS += -DHAVE_OPENGL_ES_1
LOCAL_CFLAGS += -DHAVE_OPENGL_ES_2
LOCAL_CFLAGS += -fvisibility=hidden
LOCAL_CFLAGS += -fno-stack-protector

LOCAL_LDFLAGS := -ffunction-sections -fdata-sections
include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := ltw
LOCAL_SRC_FILES := \
    egl.c \
    proc.c \
    main.c \
    glformats.c \
    basevertex.c \
    shader_wrapper.c \
    string_utils.c \
    framebuffer.c \
    of_buffer_copier.c \
    stubs.c \
    multidraw.c \
    vertexattrib.c \
    swizzle.c \
    license_notice.c \
    env.c \
    vgpu_shaderconv/shaderconv.c \
    unordered_map/unordered_map.c \
    unordered_map/int_hash.c
LOCAL_STATIC_LIBRARIES := glsl_optimizer
LOCAL_CFLAGS += -fno-stack-protector
LOCAL_LDFLAGS := -ffunction-sections -fdata-sections -Wl,--version-script=$(LOCAL_PATH)/version.script
# Comment for debugging
LOCAL_LDFLAGS += -flto -Wl,--gc-sections
LOCAL_LDLIBS := -llog -lEGL
include $(BUILD_SHARED_LIBRARY)
